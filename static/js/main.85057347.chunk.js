(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(10),c=n.n(a),r=n(47),s=n.n(r),i=n(11),o=n(34),u=n(15),j=n(17),l=n(35),b=n(25),O=n(6),d=function(e){var t=e.userObj;return Object(O.jsx)("nav",{children:Object(O.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(O.jsx)("li",{children:Object(O.jsx)(o.b,{to:"/",style:{marginRight:10},children:Object(O.jsx)(j.a,{icon:l.c,color:"#04AAFF",size:"2x"})})}),Object(O.jsx)("li",{children:Object(O.jsxs)(o.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(O.jsx)(j.a,{icon:b.e,color:"#04AAFF",size:"2x"}),Object(O.jsx)("span",{style:{marginTop:10},children:t.displayName?"".concat(t.displayName,"\uc758 Profile"):"Profile"})]})})]})})},p=n(0),f=n.n(p),h=n(1),m=n(50),x=n(51),g=n(28),v=n(29),_=Object({NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyD-mBEhnEGayRzD7E8mDNgdnisO3o1ssCY",REACT_APP_AUTH_DOMAIN:"nwitter-24f9b.firebaseapp.com",REACT_APP_PROJECT_ID:"nwitter-24f9b",REACT_APP_STORAGE_BUCKET:"nwitter-24f9b.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"671060231586",REACT_APP_APP_ID:"1:671060231586:web:ef8419a6c2631ec5501efb"}),w={apiKey:_.REACT_APP_API_KEY,authDomain:_.REACT_APP_AUTH_DOMAIN,projectId:_.REACT_APP_PROJECT_ID,storageBucket:_.REACT_APP_STORAGE_BUCKET,messagingSenderId:_.REACT_APP_MESSAGING_SENDER_ID,appId:_.REACT_APP_APP_ID},y=Object(m.a)(w),A=Object(x.a)(y),N=Object(g.d)(),C=Object(v.e)(),E=v.c,I=v.d,S=v.g,P=v.a,R=v.f,T=v.b,k=g.c,D=g.e,F=n(4),U=n(37),L=function(){var e=Object(a.useState)({email:"",password:"",error:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],u=s[1],j=function(e){var t=e.target,a=t.name,r=t.value;return c(Object(U.a)(Object(U.a)({},n),{},Object(F.a)({},a,r)))},l=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!o){e.next=5;break}return e.next=5,k(N,n.email,n.password);case 5:if(o){e.next=8;break}return e.next=8,D(N,n.email,n.password);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),c({error:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{onSubmit:l,className:"container",children:[Object(O.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:n.email,onChange:j,className:"authInput"}),Object(O.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:n.password,onChange:j,className:"authInput"}),Object(O.jsx)("input",{type:"submit",className:"authInput authSubmit",value:o?"Create New Account ":"Log in"}),n.error&&Object(O.jsx)("span",{className:"authError",children:n.error})]}),Object(O.jsx)("span",{onClick:function(){return u((function(e){return!e}))},className:"authSwitch",children:o?"Log in":"Create Account"})]})},B=function(e){e.isLoggedIn;var t=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)&&(a=new g.b),"github"===n&&(a=new g.a),e.next=5,Object(g.f)(N,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"authContainer",children:[Object(O.jsx)(j.a,{icon:l.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(O.jsx)(L,{}),Object(O.jsxs)("div",{className:"authBtns",children:[Object(O.jsxs)("button",{onClick:t,name:"google",className:"authBtn",children:["Continue with Google ",Object(O.jsx)(j.a,{icon:l.b})]}),Object(O.jsxs)("button",{onClick:t,name:"github",className:"authBtn",children:["Continue with Github ",Object(O.jsx)(j.a,{icon:l.a})]})]})]})},G=n(26),K=function(e){var t=e.nweetObj,n=e.isOwner,c=Object(a.useState)(!1),r=Object(i.a)(c,2),s=r[0],o=r[1],u=Object(a.useState)(t.text),l=Object(i.a)(u,2),d=l[0],p=l[1],m=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this nweet?")){e.next=6;break}return e.next=4,Object(G.a)(Object(G.d)(A,t.attachmentUrl));case 4:return e.next=6,E(I(C,"nweets/".concat(t.id)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){return o((function(e){return!e}))},g=function(){var e=Object(h.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,S(I(C,"nweets/".concat(t.id)),{text:d});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"nweet",children:s?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{onSubmit:g,className:"container nweetEdit",children:[Object(O.jsx)("input",{type:"text",placeholder:"Edit your Nweet",value:d,required:!0,onChange:function(e){var t=e.target.value;p(t)},autoFocus:!0,className:"formInput"}),Object(O.jsx)("input",{type:"submit",value:"Update Nweet",className:"formBtn"})]}),Object(O.jsx)("span",{onClick:x,className:"formBtn cancelBtn",children:"Cancel"})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(O.jsx)("img",{src:t.attachmentUrl,alt:""}),n&&Object(O.jsxs)("div",{className:"nweet__actions",children:[Object(O.jsx)("span",{onClick:m,children:Object(O.jsx)(j.a,{icon:b.d})}),Object(O.jsx)("span",{onClick:x,children:Object(O.jsx)(j.a,{icon:b.a})})]})]})})},z=n(71),H=function(e){var t=e.userObj,n=Object(a.useState)(""),c=Object(i.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),l=u[0],d=u[1],p=function(){var e=Object(h.a)(f.a.mark((function e(n){var a,c,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r){e.next=2;break}return e.abrupt("return");case 2:if(n.preventDefault(),a="",c=Object(G.d)(A,"".concat(t.uid,"/").concat(Object(z.a)())),""===l){e.next=11;break}return e.next=8,Object(G.e)(c,l,"data_url");case 8:return e.next=10,Object(G.b)(c);case 10:a=e.sent;case 11:return i={text:r,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:a},e.prev=12,e.next=15,P(T(C,"nweets"),i);case 15:o=e.sent,console.log("Document written with ID: ",o.id),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),console.error("Error adding document: ",e.t0);case 22:s(""),d("");case 24:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{onSubmit:p,className:"factoryForm",children:[Object(O.jsxs)("div",{className:"factoryInput__container",children:[Object(O.jsx)("input",{className:"factoryInput__input",value:r,onChange:function(e){var t=e.target.value;s(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),Object(O.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),Object(O.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[Object(O.jsx)("span",{children:"Add photos"}),Object(O.jsx)(j.a,{icon:b.b})]}),Object(O.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;d(t)},n.readAsDataURL(t)},style:{opacity:0}}),l&&Object(O.jsxs)("div",{className:"factoryForm__attachment",children:[Object(O.jsx)("img",{src:l,style:{backgroundImage:l},alt:""}),Object(O.jsxs)("div",{className:"factoryForm__clear",onClick:function(){return d("")},children:[Object(O.jsx)("span",{className:"clear",children:"Remove"}),Object(O.jsx)(j.a,{icon:b.c})]})]})]})},M=function(e){var t=e.userObj,n=Object(a.useState)([]),c=Object(i.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){R(T(C,"nweets"),(function(e){var t=e.docs.map((function(e){return Object(U.a)({id:e.id},e.data())}));s(t)}))}),[]),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(H,{userObj:t}),Object(O.jsx)("div",{style:{marginTop:30},children:r.map((function(e){return Object(O.jsx)(K,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},W=n(39),J=n(30),Y=function(e){var t=e.refreshUser,n=e.userObj,c=Object(a.useState)(n.displayName),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)(""),d=Object(i.a)(l,2),p=d[0],m=d[1],x=Object(u.f)(),g=function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(J.i)(T(C,"nweets"),Object(J.k)("creatorId","==",n.uid),Object(J.h)("createdAt","desc")),e.next=3,Object(J.e)(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n.displayName===s){e.next=5;break}return e.next=4,Object(W.g)(n,{displayName:s,photoURL:n.photoURL});case 4:t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){g()}),[]);var _=function(){return m(null)};return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("form",{onSubmit:v,className:"profileForm",children:[Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[Object(O.jsx)("span",{children:"Add photos"}),Object(O.jsx)(j.a,{icon:b.b})]}),Object(O.jsx)("input",{id:"attach-file",type:"file",accept:"image/profile/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;m(t)},n.readAsDataURL(t)},style:{opacity:0}}),p?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:p,style:{backgroundImage:p},alt:""}),Object(O.jsxs)("div",{className:"factoryForm__clear",onClick:_,children:[Object(O.jsx)("span",{className:"clear",children:"Remove"}),Object(O.jsx)(j.a,{icon:b.c})]})]}):n.photoURL&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("img",{src:n.photoURL,style:{backgroundImage:n.photoURL},alt:""}),Object(O.jsxs)("div",{className:"factoryForm__clear",onClick:_,children:[Object(O.jsx)("span",{className:"clear",children:"Remove"}),Object(O.jsx)(j.a,{icon:b.c})]})]})]}),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{type:"text",placeholder:"Display name",value:s,onChange:function(e){var t=e.target.value;o(t)},className:"formInput",autoFocus:!0}),Object(O.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]})]}),Object(O.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){N.signOut(),x.push("/")},children:"Log Out"})]})},q=function(e){var t=e.refreshUser,n=e.isLoggedIn,a=e.userObj;return Object(O.jsxs)(o.a,{children:[n&&Object(O.jsx)(d,{userObj:a}),Object(O.jsx)(u.c,{children:n?Object(O.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[Object(O.jsx)(u.a,{exact:!0,path:"/",children:Object(O.jsx)(M,{userObj:a})}),Object(O.jsx)(u.a,{exact:!0,path:"/profile",children:Object(O.jsx)(Y,{userObj:a,refreshUser:t})})]}):Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(u.a,{exact:!0,path:"/",children:Object(O.jsx)(B,{})})})})]})};var V=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],u=s[1],j=Object(a.useState)(null),l=Object(i.a)(j,2),b=l[0],d=l[1];return Object(a.useEffect)((function(){N.onAuthStateChanged((function(e){e&&(u(!0),d(e)),e||u(!1),c(!0)}))}),[]),Object(O.jsxs)(O.Fragment,{children:[n?Object(O.jsx)(q,{refreshUser:function(){var e=N.currentUser;d(Object.assign({},e))},isLoggedIn:o,userObj:b}):"Initialiazing....!",Object(O.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear()," Nwitter"]})]})};n(68);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(V,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.85057347.chunk.js.map